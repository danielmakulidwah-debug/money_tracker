<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Budget Master</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-slate-900 text-white">

  <div id="root"></div>

  <script type="text/babel">

    const { useState } = React;

    function BudgetMaster() {
      const [view, setView] = useState("overview");

      const [income, setIncome] = useState([
        { id: 1, amount: 150000, source: "Salary", date: "2026-01-15", category: "Income" }
      ]);

      const [expenses, setExpenses] = useState([
        { id: 1, amount: 50000, description: "Rent", date: "2026-01-01", category: "Housing" },
        { id: 2, amount: 15000, description: "Groceries", date: "2026-01-05", category: "Food" },
        { id: 3, amount: 5000, description: "Taxi", date: "2026-01-06", category: "Transport" }
      ]);

      const categories = ["Food","Transport","Housing","Utilities","Shopping","Entertainment","Healthcare","Other"];

      const [budgets, setBudgets] = useState({
        Food: 30000,
        Transport: 20000,
        Housing: 50000,
        Utilities: 15000,
        Shopping: 25000,
        Entertainment: 10000,
        Healthcare: 15000,
        Other: 10000
      });

      const [newTx, setNewTx] = useState({
        type: "expense",
        amount: "",
        description: "",
        category: "Food",
        date: new Date().toISOString().slice(0,10)
      });

      const formatMoney = (n) =>
        new Intl.NumberFormat("en-MW", {
          style: "currency",
          currency: "MWK",
          minimumFractionDigits: 0
        }).format(n);

      const totalIncome = income.reduce((s,i)=>s+i.amount,0);
      const totalExpenses = expenses.reduce((s,e)=>s+e.amount,0);
      const balance = totalIncome - totalExpenses;

      const addTransaction = () => {
        if (!newTx.amount || !newTx.description) {
          alert("Fill all fields");
          return;
        }

        const tx = {
          id: Date.now(),
          amount: Number(newTx.amount),
          date: newTx.date,
          category: newTx.type === "income" ? "Income" : newTx.category,
          description: newTx.description,
          source: newTx.description
        };

        newTx.type === "income"
          ? setIncome([...income, tx])
          : setExpenses([...expenses, tx]);

        setView("overview");
        setNewTx({ ...newTx, amount:"", description:"" });
      };

      return (
        <div className="min-h-screen p-6 max-w-6xl mx-auto">

          <h1 className="text-4xl font-bold text-green-400 mb-2">Budget Master</h1>
          <p className="text-slate-400 mb-6">Track your money, control your spending</p>

          <div className="flex gap-3 mb-6">
            <button onClick={()=>setView("overview")} className="btn">Overview</button>
            <button onClick={()=>setView("add")} className="btn">Add Transaction</button>
            <button onClick={()=>setView("budgets")} className="btn">Budgets</button>
          </div>

          {view === "overview" && (
            <>
              <div className="grid md:grid-cols-3 gap-4 mb-6">
                <Card title="Income" value={formatMoney(totalIncome)} />
                <Card title="Expenses" value={formatMoney(totalExpenses)} />
                <Card title="Balance" value={formatMoney(balance)} />
              </div>

              <div className="bg-slate-800 p-5 rounded-xl">
                <h2 className="text-xl font-bold mb-4">Recent Expenses</h2>
                {expenses.map(e=>(
                  <div key={e.id} className="flex justify-between py-2 border-b border-slate-700">
                    <span>{e.description}</span>
                    <span className="text-red-400">{formatMoney(e.amount)}</span>
                  </div>
                ))}
              </div>
            </>
          )}

          {view === "add" && (
            <div className="bg-slate-800 p-6 rounded-xl max-w-xl">
              <h2 className="text-xl font-bold mb-4">Add Transaction</h2>

              <select className="input" onChange={e=>setNewTx({...newTx,type:e.target.value})}>
                <option value="expense">Expense</option>
                <option value="income">Income</option>
              </select>

              <input className="input" type="number" placeholder="Amount"
                value={newTx.amount}
                onChange={e=>setNewTx({...newTx,amount:e.target.value})} />

              <input className="input" type="text" placeholder="Description"
                value={newTx.description}
                onChange={e=>setNewTx({...newTx,description:e.target.value})} />

              {newTx.type==="expense" && (
                <select className="input"
                  onChange={e=>setNewTx({...newTx,category:e.target.value})}>
                  {categories.map(c=><option key={c}>{c}</option>)}
                </select>
              )}

              <button onClick={addTransaction} className="btn w-full mt-4">Save</button>
            </div>
          )}

        </div>
      );
    }

    function Card({title,value}) {
      return (
        <div className="bg-slate-800 p-5 rounded-xl">
          <p className="text-slate-400">{title}</p>
          <p className="text-2xl font-bold">{value}</p>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<BudgetMaster />);

  </script>

  <style>
    .btn {
      background: linear-gradient(to right,#22c55e,#3b82f6);
      padding: 0.75rem 1.25rem;
      border-radius: 0.75rem;
      font-weight: 600;
    }
    .input {
      width: 100%;
      margin-bottom: 0.75rem;
      padding: 0.75rem;
      border-radius: 0.5rem;
      background: #1e293b;
      border: 1px solid #334155;
    }
  </style>

</body>
</html>
